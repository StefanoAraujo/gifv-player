/*! GIFV Player - v0.0.1 - 2015-03-10
* Copyright (c) 2015 Globo.com; Licensed MIT */
function GifvPlayer(){"use strict";this.init.apply(this,arguments)}!function(a,b){"use strict";var c,d;c={selector:"video",play:function(a){a[0].play()},pause:function(a){a[0].pause()},isPaused:function(a){return a[0].paused}},d={selector:".gifv-player",play:function(a){var b=a.find("> img");b.data("gifv-playing",!0).attr("src",b.data("gifv-original"))},pause:function(a){var b=a.find("> img");b.data("gifv-playing",!1).attr("src",b.data("gifv-poster"))},isPaused:function(a){return!a.find("> img").data("gifv-playing")}},GifvPlayer.prototype={init:function(a){this.options=a||{},this.hasVideoSupport()?this.controller=c:(this.controller=d,this.replaceVideoWithWrapper()),this.bindEvents()},replaceVideoWithWrapper:function(){b("video").replaceWith(function(){var a=b(this);return b('<div class="gifv-player" />').append(b("<img />",{src:a.attr("poster"),attr:{width:a.attr("width"),height:a.attr("height")},data:{"gifv-poster":a.attr("poster"),"gifv-original":a.data("gifv-original")}}))})},destroy:function(){b(document).off(".gifv")},bindEvents:function(){var a=this;b(document).on("click.gifv",this.controller.selector,function(c){c.preventDefault();var d=b(this);a.playPause(d)})},playPause:function(a){this.controller.isPaused(a)?this.play(a):this.pause(a)},play:function(a){var c=b(document).data("gifv-current");c&&this.pause(c),b(document).data("gifv-current",a),this.controller.play(a)},pause:function(a){b(document).removeData("gifv-current"),this.controller.pause(a)},hasVideoSupport:function(){var a=document.createElement("video");return!!a.canPlayType&&(""!==a.canPlayType("video/mp4")||""!==a.canPlayType("video/ogg"))}}}(this,jQuery);