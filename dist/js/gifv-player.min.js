/*! GIFV Player - v0.0.7 - 2015-03-30
* Copyright (c) 2015 Globo.com; Licensed MIT */
function GifvPlayer(){"use strict";this.init.apply(this,arguments)}!function(a,b){"use strict";var c,d;c={play:function(a){var b=a.find("video");b[0].play()},pause:function(a){var b=a.find("video");b[0].pause()},isPaused:function(a){return a.find("> video")[0].paused}},d={play:function(a){var b=a.find("img");b.attr("src",b.data("gifv-original"))},pause:function(a){var b=a.find("img");b.attr("src",b.data("gifv-poster"))},isPaused:function(a){return!a.hasClass("gifv-player-playing")}},GifvPlayer.prototype={selector:".gifv-player",init:function(a){this.options=a||{},this.videoSelector=this.selector+" video",this.hasVideoSupport()?this.controller=c:(this.controller=d,this.storeOriginalSource()),this.bindEvents(),this.hideVideoElements()},destroy:function(){b(document).off(".gifv"),b(this.videoSelector).off(".gifv")},hideVideoElements:function(){b(this.videoSelector).hide()},storeOriginalSource:function(){b("img",this.selector).each(function(){var a=b(this);a.data("gifv-poster",a.attr("src"))})},bindEvents:function(){var a=this;b(document).on("click.gifv touchstart.gifv",this.selector,function(c){c.preventDefault();var d=b(this);return a.playPause(d),!0}),b(this.videoSelector).on("loadeddata.gifv",function(){a.hidePoster(b(this).parents(a.selector))}),b(this.videoSelector).on("webkitendfullscreen.gifv",function(){var c=b(this).parents(a.selector);a.showPoster(c),c.find("video").hide(),a.pause(c)})},showPoster:function(a){a.eq(0).find("img").css("visibility","visible")},hidePoster:function(a){a.eq(0).find("img").css("visibility","hidden")},playPause:function(a){this.isPaused(a)?this.play(a):this.pause(a)},play:function(a){var c=b(document).data("gifv-current");c&&this.pause(c),b(document).data("gifv-current",a),a.addClass("gifv-player-playing"),a.find("video").show(),this.controller.play(a)},pause:function(a){b(document).removeData("gifv-current"),a.removeClass("gifv-player-playing"),this.controller.pause(a)},isPaused:function(a){return this.controller.isPaused(a)},hasVideoSupport:function(){var a=document.createElement("video");return!!a.canPlayType&&(""!==a.canPlayType("video/mp4")||""!==a.canPlayType("video/webm"))}}}(this,jQuery);